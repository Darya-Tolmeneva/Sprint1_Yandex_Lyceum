# Сервис подсчёта арифметических выражений

### Условиe задачи
В конце прошлого модуля вы реализовали программу, которая вычисляла арифметические выражения. Давайте сделаем из неё веб-сервис: пользователь отправляет арифметическое выражение по HTTP и получает в ответ его результат.

У сервиса 1 endpoint с url-ом 
``/api/v1/calculate``. Пользователь отправляет на этот url POST-запрос с телом:

``{
"expression": "выражение, которое ввёл пользователь"
}``

В ответ пользователь получает HTTP-ответ с телом:

``{
"result": "результат выражения"
}``

и кодом 200, если выражение вычислено успешно, либо HTTP-ответ с телом:

``{
"error": "Expression is not valid"
}``

и кодом 422, если входные данные не соответствуют требованиям приложения — например, кроме цифр и разрешённых операций пользователь ввёл символ английского алфавита.

Ещё один вариант HTTP-ответа:

``{
"error": "Internal server error"
}``

и код 500 в случае какой-либо иной ошибки («Что-то пошло не так»).

### Структура проекта
Точка входа в приложение расположена в ``cmd/server/main.go``.

Импортируемые функции, необходимые для работы приложения расположены в папке ``pkg``.  
Необходимые структуры и глобальные переменные расположены в ``pkg/models/models.go``.
Хэндлер для обработки запросов находится в файле:
``internal/application/application.go``. 

Тесты приложения расположены рядом с тестируемыми частями.
* ``checker_test.go`` тесты для проверки функций, ответственных за функции проверки корректности выражения.
* ``main_test.go`` тестирование работоспособности сервера. 
* ``parser_test.go`` тесты на проверку преобразования выражения в постфиксную нотацию, а также на проверку работоспособности функции, отвечающей за вычисление выражения.

### Логика приложения
Хэндлер обрабатывает запросы используя метод ``POST``, на эндпоинт
``/api/v1/calculate``.

#### Тело запроса:
``
{
"expression": "выражение, которое ввёл пользователь"
}
``

#### Обработка запроса:

* Проверяет, соответствует ли выражение заданным требованиям (только цифры и разрешённые арифметические операции, а также корректное выражение). Если нет, то возвращает ошибку с кодом 422.
* Переводит выражение в постфиксную нотацию.
* Если количество цифр меньше 2, деление на ноль или выражение не получилось вычислить, то возвращает ошибку с кодом 500.
* Вычисляет результат, если проверка прошла успешно.

#### Пример тестов:

		{"1+2", 200, "3.00"},
		{"1+2*", 422, "Expression is not valid"},
		{"1/0", 500, "Internal server error"},

### Использование приложения

1. Склонируйте репозиторий к себе

       git clone https://github.com/Darya-Tolmeneva/Sprint1_Yandex_Lyceum.git
       cd Sprint1_Yandex_Lyceum
2. Запустите сервер используя команду 

       go run ./cmd/server/main.go
3. Для проверки вы можете запустить готовые тесты, используя команду ниже. При необходимости вы можете дописать свои тесты по аналогии с теми, что уже есть.

       go test ./...
